<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<HBox fx:id="rootView" alignment="CENTER_LEFT" spacing="15" styleClass="playback-bar" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.bilibili.musicplayer.controller.PlaybackController">
    <padding>
        <Insets top="10" right="25" bottom="10" left="25"/>
    </padding>

    <!-- 组 1: 播放控制按钮 (左侧) -->
    <HBox alignment="CENTER_LEFT" spacing="8">
        <!-- 播放模式切换按钮 (Normal, Repeat All, Repeat One, Shuffle) -->
        <Button fx:id="playbackModeButton" styleClass="playback-icon-button" onAction="#handleTogglePlaybackMode"> <!-- 添加 onAction -->
            <graphic>
                <ImageView fitHeight="24" fitWidth="24" pickOnBounds="true" preserveRatio="true">
                    <image>
                        <Image url="@/icons/normal.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>

        <!-- 上一首按钮 -->
        <Button fx:id="prevButton" styleClass="playback-icon-button" onAction="#handlePrevious"> <!-- 添加 onAction -->
            <graphic>
                <ImageView fitHeight="24" fitWidth="24" pickOnBounds="true" preserveRatio="true">
                    <image>
                        <Image url="@/icons/previous.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>

        <!-- 播放/暂停按钮 -->
        <Button fx:id="playPauseButton" styleClass="playback-icon-button" onAction="#handlePlayPause"> <!-- 添加 onAction -->
            <graphic>
                <ImageView fitHeight="24" fitWidth="24" pickOnBounds="true" preserveRatio="true">
                    <image>
                        <!-- 初始图标是播放，实际会通过代码切换 -->
                        <Image url="@/icons/play.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>

        <!-- 停止按钮 -->
        <Button fx:id="stopButton" styleClass="playback-icon-button" onAction="#handleStop"> <!-- 添加 onAction -->
            <graphic>
                <ImageView fitHeight="24" fitWidth="24" pickOnBounds="true" preserveRatio="true">
                    <image>
                        <Image url="@/icons/stop.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>

        <!-- 下一首按钮 -->
        <Button fx:id="nextButton" styleClass="playback-icon-button" onAction="#handleNext"> <!-- 添加 onAction -->
            <graphic>
                <ImageView fitHeight="24" fitWidth="24" pickOnBounds="true" preserveRatio="true">
                    <image>
                        <Image url="@/icons/next.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
    </HBox>

    <!-- 组 2: 歌曲信息和进度条 (中间，占据大部分空间) -->
    <HBox alignment="CENTER_LEFT" spacing="10" HBox.hgrow="ALWAYS">
        <Label fx:id="currentSongLabel" text="未选择歌曲" styleClass="current-song-label"/>
        <Label fx:id="currentTimeLabel" text="00:00" styleClass="time-label"/>
        <Slider fx:id="progressBar" min="0" max="1" HBox.hgrow="ALWAYS"/>
        <Label fx:id="totalTimeLabel" text="00:00" styleClass="time-label"/>
    </HBox>

    <!-- 组 3: 音量控制 (右侧) -->
    <HBox alignment="CENTER_RIGHT" spacing="5">
        <ImageView fitHeight="20" fitWidth="20" pickOnBounds="true" preserveRatio="true">
            <image>
                <Image url="@/icons/volume.png" />
            </image>
        </ImageView>
        <Slider fx:id="volumeSlider" min="0" max="100" value="100" prefWidth="80"/>
    </HBox>

</HBox>
